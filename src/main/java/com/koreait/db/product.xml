<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product">


	<select id="searchProduct" parameterType="string" resultType="map">
		select * from tb_product where p_name LIKE CONCAT('%', #{searchText}, '%')

	</select>

	<select id="mainProduct" resultType="map">
		select * from tb_product
	</select>
	
	<insert id="uploadproduct" parameterType="map">
		  insert into tb_product (p_name, p_price, p_state, p_delcharge, p_deallocation, p_category, p_content, p_memidx, p_tag, p_picturepath, p_picture, p_exchange,p_priceConsult,p_quantity)
		  values(#{p_name}, #{p_price}, #{p_state}, #{p_delcharge}, #{p_deallocation}, #{p_category}, #{p_content}, #{p_memidx}, #{p_tag}, #{p_picturepath}, #{p_picture}, #{p_exchange}, #{p_priceConsult}, #{p_quantity})
	</insert>
	
	<!-- 상품 idx -> 올린 상점 idx -->
	<select id="storeIdx" parameterType="int" resultType="int">
		select p_memidx from tb_product where p_idx=#{p_idx}
	</select>
	
	<!-- 상점 이름 가져오는 sql -->
	<select id="storeName" parameterType="int" resultType="string">
		select m_store from tb_member  where m_idx = #{m_idx}
	</select>
</mapper> 